# AI í¬í†  ì•¨ë²” ê¸°ëŠ¥ â€” ì„¤ê³„ ë¬¸ì„œ

> 5ì¸ íŒ€ í† ë¡ (PM 1 + ì‹œë‹ˆì–´ ê¸°íšì 2 + UX ë””ìì´ë„ˆ 2) ê²°ê³¼

## 1. ì™œ ì•¨ë²”ì¸ê°€

ì›¨ë”© ìŠ¤ëƒ… ì‚¬ì§„ì˜ í•µì‹¬ì€ **íë ˆì´ì…˜**ì´ë‹¤.

- ì‹¤ì œ ìŠ¤ëƒ… ì´¬ì˜: 300ì¥ ì´¬ì˜ â†’ 100ì¥ ë³´ì • â†’ **20-30ì¥ ì•¨ë²” ìˆ˜ë¡ (ë² ìŠ¤íŠ¸ì»·)**
- ì•¨ë²” = "ì„ ë³„ + ìˆœì„œ + ìŠ¤í† ë¦¬ë¼ì¸"ì˜ ê²°ê³¼ë¬¼

í˜„ì¬ AI ìŠ¤íŠœë””ì˜¤ì˜ í”Œë¡œìš°:
```
ìƒì„±(Generate) â†’ ì¦ê²¨ì°¾ê¸°(Favorites) â†’ ì²­ì²©ì¥ ì ìš©(Apply)
```

**ë¬¸ì œ: ì¦ê²¨ì°¾ê¸°ì™€ ì ìš© ì‚¬ì´ì— "íë ˆì´ì…˜ ë ˆì´ì–´"ê°€ ì—†ë‹¤.**

- ì¦ê²¨ì°¾ê¸° = ìˆ˜ì§‘ (ì¢‹ì•„ë³´ì´ëŠ” ê²ƒ ëª¨ìœ¼ê¸°)
- ì•¨ë²” = **ì‘í’ˆ** (ì–´ë–¤ ì‚¬ì§„ì„, ì–´ë–¤ ìˆœì„œë¡œ ë³´ì—¬ì¤„ì§€ ê²°ì •)

ì•¨ë²”ì´ ì±„ìš°ëŠ” ë¹ˆìë¦¬:
```
ìƒì„±(Generate) â†’ ì¦ê²¨ì°¾ê¸°(Favorites) â†’ ì•¨ë²”(Album) â†’ ì²­ì²©ì¥ ì ìš©(Apply)
```

---

## 2. íŒ€ í† ë¡  ê¸°ë¡

### 2.1 "ì•¨ë²”"ì˜ ì •ì˜ ë…¼ìŸ

**ì‹œë‹ˆì–´ ê¸°íšì A (ì„œë¹„ìŠ¤ ì „ëµ)**:
> ì•¨ë²”ì€ ë‹¨ìˆœí•œ ì‚¬ì§„ ëª¨ìŒì´ ì•„ë‹ˆë¼ íë ˆì´ì…˜ì˜ ê²°ê³¼ë¬¼. 200ì¥ì—ì„œ 30ì¥ì„ ê³ ë¥´ëŠ” ê³¼ì •ì—ì„œ ìŠ¤í† ë¦¬ë¼ì¸ì´ ë§Œë“¤ì–´ì§„ë‹¤. ìš°ë¦¬ ì„œë¹„ìŠ¤ ë§¥ë½ì—ì„œ **ì•¨ë²” = ì²­ì²©ì¥ ê°¤ëŸ¬ë¦¬ì— ì‹¤ë¦´ ë² ìŠ¤íŠ¸ì»· ëª¨ìŒ + ìˆœì„œ/êµ¬ì„±**.

**ì‹œë‹ˆì–´ ê¸°íšì B (IA/ìœ ì € í”Œë¡œìš°)**:
> ì•¨ë²”ì´ ë°˜ë“œì‹œ "ë³„ë„ ì—”í‹°í‹°"ì—¬ì•¼ í•˜ë‚˜? ì¦ê²¨ì°¾ê¸° ëª©ë¡ì—ì„œ ì§ì ‘ ìˆœì„œ í¸ì§‘í•˜ê³  ì ìš©í•˜ë©´ ì•ˆ ë˜ë‚˜?

**UX ë””ìì´ë„ˆ A (ì¸í„°ë™ì…˜)**:
> "ì•¨ë²”"ì´ ë³„ë„ë¡œ ì¡´ì¬í•˜ë©´ ì²­ì²©ì¥ ê°¤ëŸ¬ë¦¬ì™€ ë¶„ë¦¬ëœ **ì•ˆì „í•œ ì‘ì—… ê³µê°„**ì´ ìƒê¸´ë‹¤. í˜„ì¬ëŠ” "ì ìš©" ëˆ„ë¥´ë©´ URLì´ ê·¸ëƒ¥ appendë˜ì–´ ëŒì´í‚¬ ìˆ˜ ì—†ëŠ” ëŠë‚Œ.

**UX ë””ìì´ë„ˆ B (ë¹„ì£¼ì–¼/ê°ì„±)**:
> "ì¦ê²¨ì°¾ê¸°"ëŠ” ìˆ˜ì§‘, "ì•¨ë²”"ì€ ì‘í’ˆ. ì´ í”„ë ˆì´ë° ì°¨ì´ê°€ ìœ ì €ì—ê²Œ "ì™„ì„±ëœ ì‘í’ˆì„ ë§Œë“¤ê³  ìˆë‹¤"ëŠ” ê°ì„±ì„ ì¤€ë‹¤.

**PM ì •ë¦¬**: ë³„ë„ ì—”í‹°í‹°ë¥¼ ë§Œë“¤ë˜, ë³µì¡ë„ë¥¼ ìµœì†Œí™”í•˜ëŠ” ë°©í–¥.

### 2.2 í•µì‹¬ ìœ ì € ì‹œë‚˜ë¦¬ì˜¤

| ì‹œë‚˜ë¦¬ì˜¤ | ì„¤ëª… | ì§€ì› ì‹œê¸° |
|---------|------|----------|
| **ì²« ì•¨ë²” ë§Œë“¤ê¸°** | AI ìƒì„± 12ì¥ ì¤‘ 8ì¥ ê³¨ë¼ ì•¨ë²” ìƒì„± â†’ ìŠ¤íƒ€ì¼ë³„ ìˆœì„œ ë°°ì¹˜ â†’ ì²­ì²©ì¥ ì ìš© | Phase 1 |
| **ì‚¬ì§„ ì¶”ê°€ í›„ ì—…ë°ì´íŠ¸** | ì¶”ê°€ ìƒì„± â†’ ìƒˆ ì‚¬ì§„ ì•¨ë²”ì— ë¼ì›Œë„£ê¸° â†’ ìˆœì„œ ì¬ì¡°ì • â†’ ì¬ì ìš© | Phase 1 |
| **ì—¬ëŸ¬ ë²„ì „ ë¹„êµ** | "í•œë³µ ìœ„ì£¼"ì™€ "ì•¼ì™¸ ìœ„ì£¼" ì•¨ë²” 2ê°œë¥¼ ë§Œë“¤ì–´ ë¹„êµ | Phase 3 |

### 2.3 ë°ì´í„° ëª¨ë¸ ë…¼ìŸ

3ê°€ì§€ ì˜µì…˜ ë¹„êµ í›„ **ì˜µì…˜ 3 ì„ íƒ**:

| ì˜µì…˜ | êµ¬ì¡° | ì†”ë¡œ ìš´ì˜ ë³µì¡ë„ | í™•ì¥ì„± |
|------|------|----------------|--------|
| 1: `invitation.extendedData.album` | JSONB ë‚´ì¥ | ìµœì†Œ | ë‚®ìŒ (ì•¨ë²” ë‹¨ìœ„ ì¿¼ë¦¬ ë¶ˆê°€) |
| 2: `aiAlbums` + `aiAlbumImages` | ì •ê·œí™” 2í…Œì´ë¸” | ë†’ìŒ | ë†’ìŒ (ì´ë¯¸ì§€ ë‹¨ìœ„ ì¿¼ë¦¬) |
| **3: `aiAlbums` (images JSONB)** | **1í…Œì´ë¸”, imagesëŠ” JSONB** | **ì ë‹¹** | **ì ë‹¹ (ì•¨ë²” ë‹¨ìœ„ ì¿¼ë¦¬ ê°€ëŠ¥)** |

**ì„ íƒ ê·¼ê±°**: ì˜µì…˜ 1ì€ í™•ì¥ ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ê³ í†µ, ì˜µì…˜ 2ëŠ” ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§ (ê°œë³„ ì´ë¯¸ì§€ ì¿¼ë¦¬ ì‹œë‚˜ë¦¬ì˜¤ ì—†ìŒ). ì˜µì…˜ 3ì€ í…Œì´ë¸” 1ê°œë¡œ ë…ë¦½ì„± í™•ë³´ + JSONBë¡œ ìœ ì—°í•œ ì´ë¯¸ì§€ ê´€ë¦¬.

### 2.4 ì ìš© ëª¨ë“œ ë…¼ìŸ

**ê¸°íšì B**: ì•¨ë²” ì ìš©ì€ **replace**ê°€ ë§ë‹¤. "ì´ ì•¨ë²” = ë‚´ ê°¤ëŸ¬ë¦¬"ë‹ˆê¹Œ.
**UX ë””ìì´ë„ˆ B**: MVPì—ì„œëŠ” "ì¶”ê°€" ë™ì‘ë§Œ. "êµì²´"ëŠ” Phase 2.
**í•©ì˜**: í˜„ì¬ì²˜ëŸ¼ append ë™ì‘, ì•¨ë²” UIì—ì„œ "ê°¤ëŸ¬ë¦¬ì— Nì¥ì´ ì¶”ê°€ë©ë‹ˆë‹¤" ëª…ì‹œ.

---

## 3. í•µì‹¬ ê²°ì • ìš”ì•½

| ê²°ì • ì‚¬í•­ | ì„ íƒ | ì´ìœ  |
|-----------|------|------|
| ë°ì´í„° ëª¨ë¸ | `aiAlbums` ë‹¨ì¼ í…Œì´ë¸”, imagesëŠ” JSONB | í…Œì´ë¸” 1ê°œë§Œ ì¶”ê°€, í™•ì¥ì„± í™•ë³´, ê°œë³„ ì´ë¯¸ì§€ ì¿¼ë¦¬ ë¶ˆí•„ìš” |
| ì•¨ë²” ê°œìˆ˜ | MVPì—ì„œ ìœ ì €ë‹¹ 1ê°œ (í”„ë¡ íŠ¸ ì œì•½, DB ì œì•½ ì—†ìŒ) | ì›¨ë”© ì²­ì²©ì¥ = ë³´í†µ 1ê°œ. Phase 3ì—ì„œ ë‹¤ì¤‘ ì•¨ë²” |
| UI ìœ„ì¹˜ | AI Studioì— "ì•¨ë²”" íƒ­ ì¶”ê°€ (4ë²ˆì§¸ íƒ­) | ê¸°ì¡´ íƒ­ ì‹œìŠ¤í…œ í™•ì¥, ìì—°ìŠ¤ëŸ¬ìš´ í”Œë¡œìš° |
| ìˆœì„œ ë³€ê²½ | `@dnd-kit` ë“œë˜ê·¸ì•¤ë“œë¡­ | ì´ë¯¸ ì„¤ì¹˜+ì‚¬ìš© ì¤‘ (`SettingsTab.tsx` ì°¸ì¡° íŒ¨í„´) |
| ì»¤ë²„ ì´ë¯¸ì§€ | MVP: images[0] = ì»¤ë²„ | ìˆ˜ë™ ì„ íƒì€ Phase 2 |
| ì ìš© ëª¨ë“œ | "ì¶”ê°€" ëª¨ë“œ | "êµì²´" ëª¨ë“œëŠ” Phase 2 |
| ìƒˆ ì˜ì¡´ì„± | ì—†ìŒ | `@dnd-kit/core`, `@dnd-kit/sortable` ì´ë¯¸ ì„¤ì¹˜ë¨ |

---

## 4. ë°ì´í„° ëª¨ë¸

### `aiAlbums` í…Œì´ë¸” (ì‹ ê·œ)

```sql
CREATE TABLE "ai_albums" (
  "id"             varchar(128) PRIMARY KEY,
  "user_id"        varchar(128) NOT NULL REFERENCES "users"("id") ON DELETE CASCADE,
  "invitation_id"  varchar(128) REFERENCES "invitations"("id") ON DELETE SET NULL,
  "name"           varchar(255) NOT NULL DEFAULT 'My Album',
  "cover_url"      varchar(500),
  "images"         jsonb DEFAULT '[]',
  "is_applied"     boolean DEFAULT false NOT NULL,
  "created_at"     timestamp DEFAULT now() NOT NULL,
  "updated_at"     timestamp DEFAULT now() NOT NULL
);

CREATE INDEX "ai_albums_user_id_idx" ON "ai_albums" ("user_id");
CREATE INDEX "ai_albums_invitation_id_idx" ON "ai_albums" ("invitation_id");
```

### Drizzle ìŠ¤í‚¤ë§ˆ

```typescript
export const aiAlbums = pgTable('ai_albums', {
  id: varchar('id', { length: 128 }).primaryKey().$defaultFn(() => createId()),
  userId: varchar('user_id', { length: 128 }).notNull()
    .references(() => users.id, { onDelete: 'cascade' }),
  invitationId: varchar('invitation_id', { length: 128 })
    .references(() => invitations.id, { onDelete: 'set null' }),
  name: varchar('name', { length: 255 }).notNull().default('My Album'),
  coverUrl: varchar('cover_url', { length: 500 }),
  images: jsonb('images').default([]).$type<AlbumImage[]>(),
  isApplied: boolean('is_applied').default(false).notNull(),
  createdAt: timestamp('created_at').defaultNow().notNull(),
  updatedAt: timestamp('updated_at').defaultNow().notNull(),
}, (table) => ({
  userIdIdx: index('ai_albums_user_id_idx').on(table.userId),
  invitationIdIdx: index('ai_albums_invitation_id_idx').on(table.invitationId),
}));
```

### `AlbumImage` íƒ€ì…

```typescript
// types/ai.tsì— ì¶”ê°€
export interface AlbumImage {
  url: string;           // S3 ì´ë¯¸ì§€ URL (= ì‹ë³„ì)
  generationId: string;  // aiGenerations.id ì°¸ì¡°
  style: string;         // AIStyle ê°’ (UI íƒœê·¸ìš©)
  role: string;          // 'GROOM' | 'BRIDE'
  addedAt: string;       // ISO 8601
}
```

---

## 5. API ì„¤ê³„

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| `GET` | `/api/ai/albums` | ìœ ì €ì˜ ì•¨ë²” ëª©ë¡ (MVP: 1ê°œ) |
| `POST` | `/api/ai/albums` | ì•¨ë²” ìƒì„± |
| `GET` | `/api/ai/albums/[id]` | ì•¨ë²” ìƒì„¸ (images í¬í•¨) |
| `PUT` | `/api/ai/albums/[id]` | ì•¨ë²” ì—…ë°ì´íŠ¸ (ì´ë¯¸ì§€ ì¶”ê°€/ì œê±°/ìˆœì„œ ë³€ê²½) |
| `DELETE` | `/api/ai/albums/[id]` | ì•¨ë²” ì‚­ì œ |
| `POST` | `/api/ai/albums/[id]/apply` | ì²­ì²©ì¥ ê°¤ëŸ¬ë¦¬ì— ì ìš© |

### PUT ìš”ì²­ ë°”ë””

í”„ë¡ íŠ¸ì—ì„œ images ë°°ì—´ ì „ì²´ë¥¼ ë³´ëƒ„ (ìˆœì„œ = ë°°ì—´ ì¸ë±ìŠ¤):

```typescript
{
  name?: string,
  coverUrl?: string | null,
  images?: AlbumImage[]  // ìµœëŒ€ 30ì¥
}
```

### Apply ìš”ì²­/ì‘ë‹µ

```typescript
// Request
POST /api/ai/albums/:id/apply
{ invitationId: string }

// Response
{
  success: true,
  data: {
    addedCount: 6,
    totalCount: 14,
    invitationName: "ê¹€ë¯¼ìˆ˜ â™¥ ì´ì§€ì€"
  }
}
```

---

## 6. UI/UX ì„¤ê³„

### 6.1 íƒ­ êµ¬ì¡° ë³€ê²½

```
í˜„ì¬: ìƒì„± | íˆìŠ¤í† ë¦¬ | ì¦ê²¨ì°¾ê¸°
ë³€ê²½: ìƒì„± | íˆìŠ¤í† ë¦¬ | ì¦ê²¨ì°¾ê¸° | ì•¨ë²”
```

### 6.2 ì•¨ë²” íƒ­ ë ˆì´ì•„ì›ƒ

**ë¹ˆ ìƒíƒœ (ì•¨ë²” ì—†ìŒ):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          â”‚
â”‚          ğŸ“· (ë¹ˆ ì•¨ë²” ì•„ì´ì½˜)               â”‚
â”‚                                          â”‚
â”‚     AI ì‚¬ì§„ì„ ëª¨ì•„ ì•¨ë²”ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”      â”‚
â”‚     ë² ìŠ¤íŠ¸ì»·ì„ ê³¨ë¼ ìˆœì„œë¥¼ ì •í•˜ê³            â”‚
â”‚     ì²­ì²©ì¥ ê°¤ëŸ¬ë¦¬ì— í•œ ë²ˆì— ì ìš©í•˜ì„¸ìš”       â”‚
â”‚                                          â”‚
â”‚         [ ì•¨ë²” ë§Œë“¤ê¸° ]                    â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì•¨ë²” ìˆìŒ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìš°ë¦¬ì˜ ì›¨ë”© ìŠ¤ëƒ…  [âœï¸]     8ì¥ Â· ì ìš©ë¨ âœ“ â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  1   â”‚ â”‚  2   â”‚ â”‚  3   â”‚ â”‚  4   â”‚    â”‚
â”‚  â”‚cover â”‚ â”‚      â”‚ â”‚      â”‚ â”‚      â”‚    â”‚
â”‚  â”‚  ğŸ‘‘  â”‚ â”‚      â”‚ â”‚      â”‚ â”‚      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  5   â”‚ â”‚  6   â”‚ â”‚  7   â”‚ â”‚  8   â”‚    â”‚
â”‚  â”‚      â”‚ â”‚      â”‚ â”‚      â”‚ â”‚  +   â”‚    â”‚
â”‚  â”‚      â”‚ â”‚      â”‚ â”‚      â”‚ â”‚ ì¶”ê°€ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚  [ìˆœì„œ ë³€ê²½ ëª¨ë“œ]      [ì²­ì²©ì¥ì— ì ìš©í•˜ê¸°]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ê·¸ë¦¬ë“œ: 2-4ì—´ ë°˜ì‘í˜• (lg 4ì—´, md 3ì—´, sm 2ì—´)
- ê° ì´ë¯¸ì§€: ì¸ë„¤ì¼ + ìˆœì„œ ë²ˆí˜¸ + í˜¸ë²„ ì‹œ X(ì œê±°) + í™•ëŒ€
- ì²« ë²ˆì§¸ ì´ë¯¸ì§€: ì»¤ë²„ ë±ƒì§€ (ğŸ‘‘)
- ë§ˆì§€ë§‰ì— "+" ì¹´ë“œ: AlbumImagePicker íŠ¸ë¦¬ê±°
- ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ ìˆœì„œ ë³€ê²½

### 6.3 ì´ë¯¸ì§€ ì„ íƒ ëª¨ë‹¬ (AlbumImagePicker)

**í•µì‹¬**: generation ë‹¨ìœ„ê°€ ì•„ë‹Œ **ê°œë³„ ì´ë¯¸ì§€** ì„ íƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ì§„ ì¶”ê°€                          [X]   â”‚
â”‚                                          â”‚
â”‚  [ì „ì²´ | ì‹ ë‘ | ì‹ ë¶€]  [ì¦ê²¨ì°¾ê¸°ë§Œ â˜]      â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ â˜‘   â”‚ â”‚     â”‚ â”‚ dim â”‚ â”‚ â˜‘   â”‚       â”‚
â”‚  â”‚img1 â”‚ â”‚img2 â”‚ â”‚ì´ë¯¸ â”‚ â”‚img4 â”‚       â”‚
â”‚  â”‚ì‹ ë¶€  â”‚ â”‚ì‹ ë‘  â”‚ â”‚ìˆìŒ â”‚ â”‚ì‹ ë¶€  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  ...                                     â”‚
â”‚                                          â”‚
â”‚         [ 2ì¥ ì¶”ê°€í•˜ê¸° ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ì†ŒìŠ¤: `GET /api/ai/generations?limit=50` â†’ generatedUrlsë¥¼ í’€ì–´ì„œ ê°œë³„ ì´ë¯¸ì§€ë¡œ í‘œì‹œ
- ì´ë¯¸ ì•¨ë²”ì— ìˆëŠ” ì´ë¯¸ì§€: dim ì²˜ë¦¬ + "ì¶”ê°€ë¨" í‘œì‹œ
- ê° ì´ë¯¸ì§€ì— ì—­í•  íƒœê·¸ (ì‹ ë‘/ì‹ ë¶€) + ìŠ¤íƒ€ì¼ ì´ë¦„

### 6.4 ì—ë””í„° ì—°ë™

`AIPhotoSection.tsx` ìˆ˜ì •:

**ì•¨ë²”ì´ ìˆì„ ë•Œ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¨ AI ì•¨ë²”                              â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”  +4ì¥          â”‚
â”‚ â”‚   â”‚ â”‚   â”‚ â”‚   â”‚ â”‚   â”‚               â”‚
â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜               â”‚
â”‚                                         â”‚
â”‚ [ì•¨ë²”ì—ì„œ ì¶”ê°€]  [AI ìŠ¤íŠœë””ì˜¤ì—ì„œ í¸ì§‘ â†’]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì•¨ë²”ì´ ì—†ì„ ë•Œ:** ê¸°ì¡´ AI ìƒì„±ê¸° ìœ ì§€ (ë³€ê²½ ì—†ìŒ)

---

## 7. ì‹ ê·œ ì»´í¬ë„ŒíŠ¸

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | ì°¸ì¡° íŒ¨í„´ |
|---------|------|----------|
| `AlbumTab.tsx` | ì•¨ë²” íƒ­ ë©”ì¸ (ìƒì„±/í¸ì§‘ UI, ìƒíƒœ ê´€ë¦¬) | `HistoryTab.tsx` íŒ¨í„´ |
| `AlbumGrid.tsx` | dnd-kit ë“œë˜ê·¸ì•¤ë“œë¡­ ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ | `SettingsTab.tsx` dnd-kit íŒ¨í„´ |
| `AlbumImagePicker.tsx` | ê°œë³„ ì´ë¯¸ì§€ ì„ íƒ ëª¨ë‹¬ | `ApplyToInvitationModal.tsx` ëª¨ë‹¬ íŒ¨í„´ |

### ê¸°ì¡´ ì½”ë“œ ì¬í™œìš©

| ê¸°ì¡´ ì½”ë“œ | ì¬í™œìš© |
|-----------|--------|
| `SettingsTab.tsx` dnd-kit | AlbumGrid: sensors, handleDragEnd, arrayMove |
| `ApplyToInvitationModal.tsx` | ì•¨ë²” ì ìš©ì—ì„œ ëª¨ë‹¬ ì¬ì‚¬ìš© |
| `GenerationCard.tsx` | AlbumImagePicker: ìŠ¤íƒ€ì¼/ì—­í•  ë±ƒì§€ íŒ¨í„´ |
| `HistoryFilters.tsx` | AlbumImagePicker: ì—­í•  í•„í„° |
| `ImageModal.tsx` | ì•¨ë²” ì´ë¯¸ì§€ í™•ëŒ€ |

---

## 8. êµ¬í˜„ ìˆœì„œ

| # | ì‘ì—… | íŒŒì¼ |
|---|------|------|
| 1 | `aiAlbums` í…Œì´ë¸” + relations + migration | `db/schema.ts`, `db/migrations/0008_ai_albums.sql` |
| 2 | `AlbumImage` íƒ€ì… ì¶”ê°€ | `types/ai.ts` |
| 3 | ì•¨ë²” CRUD API | `app/api/ai/albums/route.ts`, `app/api/ai/albums/[id]/route.ts` |
| 4 | ì•¨ë²” ì ìš© API | `app/api/ai/albums/[id]/apply/route.ts` |
| 5 | `AIStudioTabs` í™•ì¥ | `app/dashboard/ai-photos/components/AIStudioTabs.tsx` |
| 6 | `AlbumImagePicker` ëª¨ë‹¬ | `app/dashboard/ai-photos/components/AlbumImagePicker.tsx` |
| 7 | `AlbumGrid` (dnd-kit) | `app/dashboard/ai-photos/components/AlbumGrid.tsx` |
| 8 | `AlbumTab` ë©”ì¸ | `app/dashboard/ai-photos/components/AlbumTab.tsx` |
| 9 | `page.tsx` í†µí•© | `app/dashboard/ai-photos/page.tsx` |
| 10 | ì—ë””í„° ì•¨ë²” í”„ë¦¬ë·° | `components/editor/tabs/gallery/AIPhotoSection.tsx` |

---

## 9. ë³µì¡ë„ ì˜ˆì‚°

| í•­ëª© | ìˆ˜ëŸ‰ |
|------|------|
| ìƒˆ DB í…Œì´ë¸” | 1ê°œ (`aiAlbums`) |
| ìƒˆ API ë¼ìš°íŠ¸ | 3ê°œ |
| ìƒˆ ì»´í¬ë„ŒíŠ¸ | 3ê°œ |
| ê¸°ì¡´ íŒŒì¼ ìˆ˜ì • | 3ê°œ |
| ìƒˆ ì˜ì¡´ì„± | 0ê°œ |

---

## 10. í˜ì´ì¦ˆ ë¡œë“œë§µ

### Phase 1 (MVP)
- DB + API + AlbumTab + AlbumGrid + AlbumImagePicker
- ìœ ì €ë‹¹ ì•¨ë²” 1ê°œ, ì‚¬ì§„ ì¶”ê°€/ì œê±°/ìˆœì„œ ë³€ê²½, ì²­ì²©ì¥ ì ìš©

### Phase 2 (ê°•í™”)
- ì»¤ë²„ ì‚¬ì§„ ìˆ˜ë™ ì„ íƒ
- "êµì²´" ì ìš© ëª¨ë“œ (ê°¤ëŸ¬ë¦¬ë¥¼ ì•¨ë²”ìœ¼ë¡œ êµì²´)
- ì•¨ë²” í”„ë¦¬ë·° (ì²­ì²©ì¥ ë‚´ ë¯¸ë¦¬ë³´ê¸°)
- ì•¨ë²” ì´ë¦„ í¸ì§‘ UI ê°•í™”

### Phase 3 (í”„ë¦¬ë¯¸ì—„)
- ì—¬ëŸ¬ ì•¨ë²” ì§€ì› (ë¹„êµ/ì „í™˜)
- ì•¨ë²” ë ˆì´ì•„ì›ƒ ì»¤ìŠ¤í„°ë§ˆì´ì§• (2ì—´/3ì—´/ë§¤ì†Œë‹‰)
- ì•¨ë²” ê³µìœ  (ì¹´ì¹´ì˜¤í†¡ ë“±)
- AI ìë™ íë ˆì´ì…˜ (ìŠ¤íƒ€ì¼ ë¯¹ìŠ¤ ì¶”ì²œ)

---

## 11. ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ì•¨ë²” íƒ­: ë¹ˆ ìƒíƒœ â†’ "ì•¨ë²” ë§Œë“¤ê¸°" â†’ ì•¨ë²” ìƒì„±
- [ ] ì´ë¯¸ì§€ ì¶”ê°€: "+" â†’ ëª¨ë‹¬ì—ì„œ ê°œë³„ ì´ë¯¸ì§€ ì„ íƒ â†’ ì•¨ë²” ë°˜ì˜
- [ ] ìˆœì„œ ë³€ê²½: ë“œë˜ê·¸ì•¤ë“œë¡­ â†’ PUT API â†’ ìƒˆë¡œê³ ì¹¨ í›„ ìœ ì§€
- [ ] ì´ë¯¸ì§€ ì œê±°: X ë²„íŠ¼ â†’ ì•¨ë²”ì—ì„œ ì œê±°
- [ ] ì²­ì²©ì¥ ì ìš©: "ì ìš©í•˜ê¸°" â†’ ì²­ì²©ì¥ ì„ íƒ â†’ galleryImages ì¶”ê°€
- [ ] ì—ë””í„° ì—°ë™: ê°¤ëŸ¬ë¦¬ íƒ­ì—ì„œ ì•¨ë²” í”„ë¦¬ë·° í‘œì‹œ
- [ ] `npx tsc --noEmit` íƒ€ì… ì—ëŸ¬ ì—†ìŒ
