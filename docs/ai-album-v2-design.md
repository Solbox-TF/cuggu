# AI í¬í†  ì•¨ë²” v2 â€” ì•¨ë²”-í¼ìŠ¤íŠ¸ ë¦¬ë””ìì¸ ì„¤ê³„ ë¬¸ì„œ

> íŒ€ ë¶„ì„ (PM 1 + UX ë””ìì´ë„ˆ 1 + ë°±ì—”ë“œ ì•„í‚¤í…íŠ¸ 1) ê²°ê³¼
> ê¸°ì¡´ ì„¤ê³„ ë¬¸ì„œ(`docs/ai-album-feature-design.md`)ì˜ í›„ì† ë¦¬ë¹„ì „

---

## 1. ì™œ ë¦¬ë””ìì¸ì¸ê°€

ê¸°ì¡´ ì„¤ê³„ì˜ ì•¨ë²”ì€ **"í›„ì²˜ë¦¬ íë ˆì´ì…˜ ë ˆì´ì–´"**ì˜€ë‹¤:
```
ìƒì„± â†’ ì¦ê²¨ì°¾ê¸° â†’ ì•¨ë²”(íë ˆì´ì…˜) â†’ ì ìš©
```

**ë¬¸ì œ**: ì´ í”Œë¡œìš°ëŠ” "ë„êµ¬ ì¤‘ì‹¬ ì‚¬ê³ "ë‹¤. ìœ ì €ëŠ” "ì‚¬ì§„ì„ ì´ê²ƒì €ê²ƒ ë§Œë“¤ì–´ë³´ë‹¤ê°€ ë‚˜ì¤‘ì— ëª¨ì•„ë³¼ê¹Œ"ë¡œ ì‹œì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

í•œêµ­ ì›¨ë”© ì»¤í”Œì˜ ì‹¤ì œ ê²½í—˜:
```
ìŠ¤ëƒ… íƒ€ì… ê²°ì • â†’ ì´¬ì˜ â†’ ì…€ë ‰(ë³´ì •ë³¸ ì„ íƒ) â†’ ì•¨ë²” ì œì‘
```

**í•µì‹¬ ì „í™˜**: ì•¨ë²”ì„ í›„ì²˜ë¦¬ê°€ ì•„ë‹Œ **ì‹œì‘ì **ìœ¼ë¡œ ëŒì–´ì˜¬ë¦°ë‹¤.
```
ì•¨ë²” ìƒì„±(ìŠ¤ëƒ… íƒ€ì… ì„ íƒ) â†’ ìƒì„±(ì´¬ì˜) â†’ íë ˆì´ì…˜(ì…€ë ‰) â†’ ì ìš©
```

---

## 2. íŒ€ í† ë¡  ê¸°ë¡

### 2.1 í”Œë¡œìš° ë°©í–¥ì„± ë…¼ìŸ

**PM (ì„œë¹„ìŠ¤ ì „ëµ)**:
> "ìŠ¤ëƒ… íƒ€ì…"ì€ ê¸°ì¡´ ìŠ¤íƒ€ì¼ì˜ ë¦¬í”„ë ˆì´ë°ì´ì§€ ìƒˆë¡œìš´ ê°œë…ì´ ì•„ë‹ˆë‹¤. í•˜ì§€ë§Œ í”„ë ˆì´ë° ì°¨ì´ê°€ UXì—ì„œëŠ” í¬ë‹¤. "ìŠ¤íƒ€ì¼"ì€ ì‚¬ì§„ 1ì¥ì˜ ì†ì„±ì´ê³ , "ìŠ¤ëƒ… íƒ€ì…"ì€ ì´¬ì˜ ì„¸íŠ¸ì˜ ì¹´í…Œê³ ë¦¬ë‹¤. ìœ ì €ê°€ "ìŠ¤ëƒ… íƒ€ì…"ì´ë¼ê³  ì¸ì‹í•˜ëŠ” ìˆœê°„, "ì´ê±´ í•œ ì„¸íŠ¸ì˜ ì´¬ì˜ì´ê³ , ê²°ê³¼ë¬¼ì€ ì•¨ë²”ì´ ëœë‹¤"ê³  ìì—°ìŠ¤ëŸ½ê²Œ ë°›ì•„ë“¤ì¸ë‹¤.

**UX ë””ìì´ë„ˆ (ì¸í„°ë™ì…˜/ê°ì„±)**:
> í˜„ì¬ Flowì˜ ê·¼ë³¸ ë¬¸ì œëŠ” ì•¨ë²”ì´ "ì •ë¦¬ ë„êµ¬"ë¡œ í¬ì§€ì…”ë‹ëœë‹¤ëŠ” ì . ìœ ì € ë¨¸ë¦¿ì†ì—ì„œ ì•¨ë²”ì€ **ëª©ì **ì´ê³  ìƒì„±ì€ **ìˆ˜ë‹¨**ì¸ë°, í˜„ì¬ í”Œë¡œìš°ëŠ” ì´ê±¸ ë’¤ì§‘ëŠ”ë‹¤. "ì‚¬ì§„ ìƒì„± ë„êµ¬"ë¥¼ ì“°ê³  ìˆë‹¤ê³  ëŠë¼ëŠëƒ, "ì•¨ë²” ì œì‘ ì„œë¹„ìŠ¤"ë¥¼ ì“°ê³  ìˆë‹¤ê³  ëŠë¼ëŠëƒì˜ ì°¨ì´. í›„ìê°€ ì§€ë¶ˆ ì˜í–¥ì´ í›¨ì”¬ ë†’ë‹¤.

**ë°±ì—”ë“œ ì•„í‚¤í…íŠ¸**:
> ë°©í–¥ì€ OK. ë‹¨, "ì•¨ë²” ìƒì„±í•˜ê¸°"ê°€ ë°°ì¹˜ ìƒì„±(10ìŠ¤íƒ€ì¼ 40ì¥ í•œë²ˆì—)ì„ íŠ¸ë¦¬ê±°í•˜ë©´ ë¹„í˜„ì‹¤ì ì´ë‹¤. Replicate rate limit, Vercel íƒ€ì„ì•„ì›ƒ, ë¶€ë¶„ ì‹¤íŒ¨ ì²˜ë¦¬, ë¹„ìš© í­ë°œ($1.60/íšŒ). ê¸°ì¡´ ë‹¨ê±´ ìƒì„± íŒŒì´í”„ë¼ì¸ì„ ìœ ì§€í•˜ë©´ì„œ ì•¨ë²”ì— ê·€ì†ì‹œí‚¤ëŠ” ë°©ì‹ì´ ìœ ì¼í•˜ê²Œ í˜„ì‹¤ì .

**í•©ì˜**: ì•¨ë²”-í¼ìŠ¤íŠ¸ ë°©í–¥ ì±„íƒ. ìƒì„± íŒŒì´í”„ë¼ì¸ì€ ê¸°ì¡´ ìœ ì§€. UI/í”„ë ˆì´ë°ë§Œ ì „í™˜.

### 2.2 "ìŠ¤ëƒ… íƒ€ì…" ê°œë… ì •ì˜

**UX ë””ìì´ë„ˆ**:
> ì´ê±´ ë‹¨ìˆœ ë¦¬ë„¤ì´ë°ì´ ì•„ë‹ˆë¼ ì¶”ìƒí™” ë ˆë²¨ì´ ë‹¤ë¥¸ ê°œë…ì´ë‹¤. "ìŠ¤íƒ€ì¼"ì€ ìƒì„± íŒŒë¼ë¯¸í„° 1:1 ë§¤í•‘(ê¸°ìˆ ì  ë‹¨ìœ„). "ìŠ¤ëƒ… íƒ€ì…"ì€ ìœ ì € ì¸ì‹ ë‹¨ìœ„ì˜ ì´¬ì˜ ì¹´í…Œê³ ë¦¬. 10ê°œ ê³ ë¥´ë¼ê³  í•˜ë©´ ê²°ì • í”¼ë¡œ, 3-4ê°œë§Œ ë³´ì—¬ì£¼ë©´ ëœë‹¤.

**PM**:
> ë§ë‹¤. ë‹¨, ìŠ¤ëƒ… íƒ€ì… ì„ íƒì´ "ì´ ì¹´í…Œê³ ë¦¬ì˜ ìŠ¤íƒ€ì¼ì„ ìë™ìœ¼ë¡œ ì „ë¶€ ìƒì„±"ì„ ì˜ë¯¸í•˜ë©´ ì•ˆ ëœë‹¤. UIì—ì„œ ì¶”ì²œ ìŠ¤íƒ€ì¼ì„ í•„í„°ë§í•˜ëŠ” ì—­í• ë¡œë§Œ ì¨ì•¼ í•œë‹¤.

**ë°±ì—”ë“œ ì•„í‚¤í…íŠ¸**:
> snap typeì€ ëŸ°íƒ€ì„ ì—”í‹°í‹°ê°€ ì•„ë‹ˆë¼ ì„¤ì • ë°ì´í„°(config). DB í…Œì´ë¸”ì´ ì•„ë‹Œ ì½”ë“œ ìƒìˆ˜ë¡œ ì •ì˜í•˜ë©´ ì¶©ë¶„. `aiAlbums.snapType`ì— í‚¤ ê°’ë§Œ ì €ì¥.

**í•©ì˜**: ìŠ¤ëƒ… íƒ€ì… = ìƒìœ„ ì¹´í…Œê³ ë¦¬ (3ê°œ). ì½”ë“œ ìƒìˆ˜ë¡œ ê´€ë¦¬. ë°°ì¹˜ ìƒì„± ì•„ë‹˜.

### 2.3 íƒ­ êµ¬ì¡° ë…¼ìŸ

**í˜„ì¬**: ìƒì„± | íˆìŠ¤í† ë¦¬ | ì¦ê²¨ì°¾ê¸° (3íƒ­)
**ê¸°ì¡´ ì„¤ê³„**: ìƒì„± | íˆìŠ¤í† ë¦¬ | ì¦ê²¨ì°¾ê¸° | ì•¨ë²” (4íƒ­ ì¶”ê°€)

**UX ë””ìì´ë„ˆ**:
> ì•¨ë²”ì´ ë©”ì¸ì´ ë˜ë©´ íˆìŠ¤í† ë¦¬/ì¦ê²¨ì°¾ê¸°ëŠ” ì—­í• ì´ ê²¹ì¹œë‹¤. íˆìŠ¤í† ë¦¬ = ì•¨ë²” ë‚´ ìƒì„± ê¸°ë¡. ì¦ê²¨ì°¾ê¸° = ì•¨ë²”ì˜ íë ˆì´ì…˜(ë² ìŠ¤íŠ¸ì»· ì„ íƒ). íƒ­ì„ ì—†ì• ê³  ì•¨ë²”ì´ ê³§ ë©”ì¸ í™”ë©´ì´ ë˜ì–´ì•¼ í•œë‹¤.

**PM**:
> ë™ì˜. ë‹¨, ê¸°ì¡´ ìƒì„± ê¸°ë¡(albumId ì—†ëŠ”)ì€ ìœ ì§€í•´ì•¼ í•œë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ ê¸°ì¡´ ë°ì´í„° ì†ì‹¤ ì—†ì–´ì•¼ í•¨.

**í•©ì˜**: íƒ­ êµ¬ì¡° ì œê±°. ì•¨ë²”ì´ ë©”ì¸ í™”ë©´. ê¸°ì¡´ ë°ì´í„°ëŠ” albumId=nullë¡œ ë³´ì¡´.

### 2.4 í†µì œê° vs ìë™í™”

**UX ë””ìì´ë„ˆ (í•µì‹¬ ê²½ê³ )**:
> ì•¨ë²”ì„ ì‹œìŠ¤í…œì´ ìë™ êµ¬ì„±í•´ì£¼ë©´ í¸í•˜ì§€ë§Œ, "ì´ê±° ê·¸ëƒ¥ AIê°€ ë§Œë“  ê±°ì–ì•„"ë¼ëŠ” ì¸ì‹ì´ ìƒê¸°ëŠ” ìˆœê°„ í”„ë¦¬ë¯¸ì—„ ê°€ì¹˜ê°€ ì¦ë°œí•œë‹¤. **ì•ë‹¨(ìŠ¤íƒ€ì¼ ì¡°í•©)ì€ ìë™í™”í•˜ê³ , ë’·ë‹¨(íë ˆì´ì…˜)ì€ ìœ ì €ì—ê²Œ ë§¡ê²¨ì•¼ í•œë‹¤.** ì´ê±´ ì‹¤ì œ ì›¨ë”© ì´¬ì˜ê³¼ë„ ê°™ë‹¤ â€” ì‚¬ì§„ì‚¬ê°€ í¬ì¦ˆ/ì•µê¸€ì„ ì •í•˜ì§€ë§Œ, ì•¨ë²”ì— ë„£ì„ ì»·ì€ ì»¤í”Œì´ ê³ ë¥¸ë‹¤.

**í•©ì˜**: ìƒì„±ì€ ì‹œìŠ¤í…œ ì£¼ë„ + íë ˆì´ì…˜(ì„ íƒ/ìˆœì„œ)ì€ ìœ ì € ì£¼ë„.

---

## 3. í•µì‹¬ ê²°ì • ìš”ì•½

| ê²°ì • ì‚¬í•­ | ì„ íƒ | ì´ìœ  |
|-----------|------|------|
| ì•¨ë²” í¬ì§€ì…”ë‹ | ë©”ì¸ í™”ë©´ (íƒ­ ì œê±°) | "ì•¨ë²” ì œì‘ ì„œë¹„ìŠ¤" í”„ë ˆì´ë° = ì§€ë¶ˆ ì˜í–¥ â†‘ |
| ìŠ¤ëƒ… íƒ€ì… | 3ê°œ ìƒìœ„ ì¹´í…Œê³ ë¦¬ | ê²°ì • í”¼ë¡œ ê°ì†Œ, ì½”ë“œ ìƒìˆ˜ë¡œ ê´€ë¦¬ |
| ìƒì„± ë°©ì‹ | ê¸°ì¡´ ë‹¨ê±´ ìœ ì§€ + ì•¨ë²” ê·€ì† | ë°°ì¹˜ ìƒì„±ì€ ë¹„ìš©/ì•ˆì •ì„±/ì¸í”„ë¼ ëª¨ë‘ ë¹„í˜„ì‹¤ì  |
| ë°ì´í„° ëª¨ë¸ | `aiAlbums` 1í…Œì´ë¸”, images JSONB | ê¸°ì¡´ ì„¤ê³„ ë¬¸ì„œ ì˜µì…˜ 3 ìœ ì§€ |
| ìƒì„±-ì•¨ë²” ê´€ê³„ | `aiGenerations.albumId` FK ì¶”ê°€ | ì–´ë–¤ ì•¨ë²”ì—ì„œ ì–´ë–¤ ìƒì„±ì´ ì´ë£¨ì–´ì¡ŒëŠ”ì§€ ì¶”ì  |
| íƒ­ êµ¬ì¡° | íˆìŠ¤í† ë¦¬/ì¦ê²¨ì°¾ê¸° ì œê±° | ì•¨ë²”ì´ ë‘ ê¸°ëŠ¥ì„ í¡ìˆ˜ |
| íë ˆì´ì…˜ | ìœ ì €ê°€ ì§ì ‘ ì„ íƒ/ìˆœì„œ ë³€ê²½ | í†µì œê° = "ë‚´ê°€ ë§Œë“  ì•¨ë²”" ê°ì„± |
| ìƒˆ ì˜ì¡´ì„± | ì—†ìŒ | dnd-kit ì´ë¯¸ ì„¤ì¹˜ë¨ |

---

## 4. ìœ ì € í”Œë¡œìš°

### 4.1 ì²« ë°©ë¬¸ (ì•¨ë²” ì—†ìŒ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI ì›¨ë”© ì•¨ë²”                                 â”‚
â”‚                                              â”‚
â”‚  ğŸ“· ë‚˜ë§Œì˜ AI ì›¨ë”© ì•¨ë²”ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”           â”‚
â”‚  ì‹¤ì œ ìŠ¤ëƒ… ì´¬ì˜ì²˜ëŸ¼, AIê°€ ë‹¤ì–‘í•œ ì»¨ì…‰ì˜         â”‚
â”‚  ì›¨ë”© ì‚¬ì§„ì„ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤                      â”‚
â”‚                                              â”‚
â”‚  Step 1. ì–¼êµ´ ì‚¬ì§„ ì—…ë¡œë“œ                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   ì‹ ë‘ ğŸ“¤    â”‚  â”‚   ì‹ ë¶€ ğŸ“¤    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                              â”‚
â”‚  Step 2. ìŠ¤ëƒ… íƒ€ì… ì„ íƒ                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ìŠ¤íŠœë””ì˜¤  â”‚ â”‚  ì•¼ ì™¸    â”‚ â”‚  ì»¨ ì…‰   â”‚      â”‚
â”‚  â”‚          â”‚ â”‚          â”‚ â”‚          â”‚      â”‚
â”‚  â”‚ í´ë˜ì‹í•œ  â”‚ â”‚ ìì—°ê´‘    â”‚ â”‚ í•œë³µ,    â”‚      â”‚
â”‚  â”‚ ì‹¤ë‚´ í™”ë³´ â”‚ â”‚ ì•¼ì™¸ ìŠ¤ëƒ… â”‚ â”‚ ë¹ˆí‹°ì§€ ë“±â”‚      â”‚
â”‚  â”‚   âœ“      â”‚ â”‚          â”‚ â”‚          â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                              â”‚
â”‚           [ ì•¨ë²” ë§Œë“¤ê¸° ]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ì•¨ë²” ëŒ€ì‹œë³´ë“œ (ì•¨ë²” ìˆìŒ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìš°ë¦¬ì˜ ì›¨ë”© ì•¨ë²”  [âœï¸]        ìŠ¤íŠœë””ì˜¤ ìŠ¤ëƒ…    â”‚
â”‚  12ì¥ ìƒì„± Â· 6ì¥ ì„ íƒë¨                        â”‚
â”‚                                              â”‚
â”‚  â”€â”€ ìƒì„±ëœ ì‚¬ì§„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                              â”‚
â”‚  í´ë˜ì‹ ìŠ¤íŠœë””ì˜¤ (4ì¥)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â˜‘   â”‚ â”‚  â˜‘   â”‚ â”‚      â”‚ â”‚  â˜‘   â”‚        â”‚
â”‚  â”‚ img1 â”‚ â”‚ img2 â”‚ â”‚ img3 â”‚ â”‚ img4 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                              â”‚
â”‚  ëŸ­ì…”ë¦¬ í˜¸í…” (4ì¥)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â˜‘   â”‚ â”‚      â”‚ â”‚  â˜‘   â”‚ â”‚      â”‚        â”‚
â”‚  â”‚ img5 â”‚ â”‚ img6 â”‚ â”‚ img7 â”‚ â”‚ img8 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                              â”‚
â”‚  [+ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ë¡œ ì¶”ê°€ ì´¬ì˜]                    â”‚
â”‚                                              â”‚
â”‚  â”€â”€ ë‚´ ì•¨ë²” (ì„ íƒëœ 6ì¥) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ìˆœì„œë³€ê²½]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1  â”‚ â”‚ 2  â”‚ â”‚ 3  â”‚ â”‚ 4  â”‚ â”‚ 5  â”‚ â”‚ 6  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜  â”‚
â”‚                                              â”‚
â”‚         [ ì²­ì²©ì¥ì— ì ìš©í•˜ê¸° ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 ì¶”ê°€ ìƒì„± (ì¸ë¼ì¸)

```
"+ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ë¡œ ì¶”ê°€ ì´¬ì˜" í´ë¦­ ì‹œ:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì¶”ê°€ ì´¬ì˜í•  ìŠ¤íƒ€ì¼ ì„ íƒ                        â”‚
â”‚                                              â”‚
â”‚  ìŠ¤íŠœë””ì˜¤ ìŠ¤ëƒ… ë‚´ ìŠ¤íƒ€ì¼:                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ í´ë˜ì‹ ìŠ¤íŠœë””ì˜¤â”‚  â”‚ ëŸ­ì…”ë¦¬ í˜¸í…”  â”‚          â”‚
â”‚  â”‚   âœ“ ìƒì„±ë¨   â”‚  â”‚   âœ“ ìƒì„±ë¨   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ë¯¸ë‹ˆë©€ë¦¬ì¦˜    â”‚  â”‚ í‘ë°± í¬íŠ¸ë¦¿   â”‚          â”‚
â”‚  â”‚  [ ì´¬ì˜í•˜ê¸° ] â”‚  â”‚  [ ì´¬ì˜í•˜ê¸° ] â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                              â”‚
â”‚  1 í¬ë ˆë”§ ì†Œëª¨ Â· ìŠ¤íƒ€ì¼ë‹¹ 4ì¥ ìƒì„±               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ìŠ¤ëƒ… íƒ€ì… ì •ì˜

```typescript
// types/ai.tsì— ì¶”ê°€

export type SnapType = 'STUDIO' | 'OUTDOOR' | 'CONCEPT';

export interface SnapTypeInfo {
  value: SnapType;
  label: string;
  description: string;
  styles: AIStyle[];
}

export const SNAP_TYPES: SnapTypeInfo[] = [
  {
    value: 'STUDIO',
    label: 'ìŠ¤íŠœë””ì˜¤ ìŠ¤ëƒ…',
    description: 'í´ë˜ì‹í•œ ì‹¤ë‚´ ì›¨ë”© í™”ë³´',
    styles: ['CLASSIC_STUDIO', 'LUXURY_HOTEL', 'MINIMALIST_GALLERY', 'BLACK_AND_WHITE'],
  },
  {
    value: 'OUTDOOR',
    label: 'ì•¼ì™¸ ìŠ¤ëƒ…',
    description: 'ìì—°ê´‘ ì† ë¡œë§¨í‹± ì•¼ì™¸ ì´¬ì˜',
    styles: ['OUTDOOR_GARDEN', 'SUNSET_BEACH', 'ENCHANTED_FOREST'],
  },
  {
    value: 'CONCEPT',
    label: 'ì»¨ì…‰ ìŠ¤ëƒ…',
    description: 'í•œë³µ, ë¹ˆí‹°ì§€, ì‹œí‹° ë“± í…Œë§ˆ ì´¬ì˜',
    styles: ['TRADITIONAL_HANBOK', 'VINTAGE_CINEMATIC', 'CITY_LIFESTYLE'],
  },
];
```

---

## 6. ë°ì´í„° ëª¨ë¸

### `aiAlbums` í…Œì´ë¸” (ì‹ ê·œ)

```typescript
// db/schema.tsì— ì¶”ê°€

export const aiAlbumStatusEnum = pgEnum('ai_album_status', [
  'draft',      // ìƒì„± ì¤‘ (ì•„ì§ íë ˆì´ì…˜ ì•ˆ í•¨)
  'completed',  // íë ˆì´ì…˜ ì™„ë£Œ
  'applied',    // ì²­ì²©ì¥ì— ì ìš©ë¨
]);

export const aiAlbums = pgTable('ai_albums', {
  id: varchar('id', { length: 128 }).primaryKey().$defaultFn(() => createId()),
  userId: varchar('user_id', { length: 128 }).notNull()
    .references(() => users.id, { onDelete: 'cascade' }),
  invitationId: varchar('invitation_id', { length: 128 })
    .references(() => invitations.id, { onDelete: 'set null' }),
  name: varchar('name', { length: 255 }).notNull().default('My Album'),
  snapType: varchar('snap_type', { length: 32 }), // 'STUDIO' | 'OUTDOOR' | 'CONCEPT'
  images: jsonb('images').default([]).$type<AlbumImage[]>(),
  status: aiAlbumStatusEnum('status').default('draft').notNull(),
  createdAt: timestamp('created_at').defaultNow().notNull(),
  updatedAt: timestamp('updated_at').defaultNow().notNull(),
}, (table) => ({
  userIdIdx: index('ai_albums_user_id_idx').on(table.userId),
}));
```

### `aiGenerations` ìˆ˜ì •

```typescript
// ê¸°ì¡´ aiGenerations í…Œì´ë¸”ì— ì¶”ê°€
albumId: varchar('album_id', { length: 128 })
  .references(() => aiAlbums.id, { onDelete: 'set null' }),
```

### `AlbumImage` íƒ€ì…

```typescript
// types/ai.tsì— ì¶”ê°€
export interface AlbumImage {
  url: string;           // S3 ì´ë¯¸ì§€ URL
  generationId: string;  // aiGenerations.id ì°¸ì¡°
  style: AIStyle;        // ìŠ¤íƒ€ì¼ (UI íƒœê·¸ìš©)
  role: PersonRole;      // 'GROOM' | 'BRIDE'
  sortOrder: number;     // ì•¨ë²” ë‚´ ìˆœì„œ
}
```

---

## 7. API ì„¤ê³„

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| `POST` | `/api/ai/albums` | ì•¨ë²” ìƒì„± (name, snapType) |
| `GET` | `/api/ai/albums` | ìœ ì €ì˜ ì•¨ë²” ëª©ë¡ (MVP: 1ê°œ) |
| `GET` | `/api/ai/albums/[id]` | ì•¨ë²” ìƒì„¸ + ì—°ê²°ëœ generations |
| `PUT` | `/api/ai/albums/[id]` | ì•¨ë²” ì—…ë°ì´íŠ¸ (ì´ë¦„, images íë ˆì´ì…˜) |
| `DELETE` | `/api/ai/albums/[id]` | ì•¨ë²” ì‚­ì œ |
| `POST` | `/api/ai/albums/[id]/apply` | ì²­ì²©ì¥ ê°¤ëŸ¬ë¦¬ì— ì ìš© |

### ìƒì„± API ìˆ˜ì •

```
POST /api/ai/generate/stream (ê¸°ì¡´)
  + albumId (optional, FormData)

ë³€ê²½ì : ìƒì„± ì™„ë£Œ ì‹œ aiGenerations.albumIdì— ì €ì¥.
SSE ìŠ¤íŠ¸ë¦¬ë° ë¡œì§ ë³€ê²½ ì—†ìŒ.
```

### PUT ìš”ì²­ ë°”ë””

```typescript
{
  name?: string,
  images?: AlbumImage[]  // ìœ ì €ê°€ ì„ íƒ+ì •ë ¬í•œ ë² ìŠ¤íŠ¸ì»· (ìµœëŒ€ 30ì¥)
}
```

---

## 8. ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### ì‹ ê·œ ì»´í¬ë„ŒíŠ¸

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | ì°¸ì¡° íŒ¨í„´ |
|---------|------|----------|
| `AlbumOnboarding.tsx` | ì²« ë°©ë¬¸: ì–¼êµ´ ì—…ë¡œë“œ + ìŠ¤ëƒ… íƒ€ì… ì„ íƒ + ì•¨ë²” ë§Œë“¤ê¸° | `AIPhotoUploader` + `StyleSelector` ì¬í™œìš© |
| `AlbumDashboard.tsx` | ì•¨ë²” ë©”ì¸: ìƒì„±ëœ ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ + íë ˆì´ì…˜ + ì ìš© | `HistoryTab` ê·¸ë¦¬ë“œ íŒ¨í„´ |
| `SnapTypeSelector.tsx` | ìŠ¤ëƒ… íƒ€ì… 3ê°œ ì¹´ë“œ ì„ íƒ UI | ì‹ ê·œ |
| `AlbumCuration.tsx` | ì„ íƒëœ ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ (dnd-kit) | `SettingsTab.tsx` dnd-kit íŒ¨í„´ |

### ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ ì¬í™œìš©

| ê¸°ì¡´ ì½”ë“œ | ì¬í™œìš© |
|-----------|--------|
| `AIPhotoUploader.tsx` | AlbumOnboardingì—ì„œ ê·¸ëŒ€ë¡œ ì‚¬ìš© |
| `StyleSelector.tsx` | ìŠ¤ëƒ… íƒ€ì… ë‚´ ì„¸ë¶€ ìŠ¤íƒ€ì¼ ì„ íƒìœ¼ë¡œ ë¦¬íŒ©í„° |
| `AIStreamingGallery.tsx` | ì•¨ë²” ë‚´ ì¸ë¼ì¸ ìƒì„± ì‹œ ì¬ì‚¬ìš© |
| `AIResultGallery.tsx` | ìƒì„± ê²°ê³¼ í‘œì‹œ ì¬ì‚¬ìš© |
| `ApplyToInvitationModal.tsx` | ì•¨ë²” ì ìš© ì‹œ ì¬ì‚¬ìš© |
| `SettingsTab.tsx` dnd-kit | AlbumCuration: sensors, handleDragEnd, arrayMove |

### ì œê±° ëŒ€ìƒ

| ì»´í¬ë„ŒíŠ¸ | ì‚¬ìœ  |
|---------|------|
| `AIStudioTabs.tsx` | íƒ­ êµ¬ì¡° ì œê±° |
| `HistoryTab.tsx` | ì•¨ë²” ëŒ€ì‹œë³´ë“œê°€ í¡ìˆ˜ |
| `FavoritesTab.tsx` | ì•¨ë²” íë ˆì´ì…˜ì´ í¡ìˆ˜ |
| `HistoryFilters.tsx` | íˆìŠ¤í† ë¦¬ íƒ­ê³¼ í•¨ê»˜ ì œê±° |

---

## 9. êµ¬í˜„ ìˆœì„œ

| # | ì‘ì—… | íŒŒì¼ |
|---|------|------|
| 1 | `aiAlbums` í…Œì´ë¸” + albumId FK + relations + migration | `db/schema.ts` |
| 2 | `SnapType`, `AlbumImage` íƒ€ì… ì¶”ê°€ | `types/ai.ts` |
| 3 | ì•¨ë²” CRUD API | `app/api/ai/albums/route.ts`, `app/api/ai/albums/[id]/route.ts` |
| 4 | ì•¨ë²” ì ìš© API | `app/api/ai/albums/[id]/apply/route.ts` |
| 5 | ìƒì„± APIì— albumId ì¶”ê°€ | `app/api/ai/generate/stream/route.ts` |
| 6 | `SnapTypeSelector` ì»´í¬ë„ŒíŠ¸ | `app/dashboard/ai-photos/components/SnapTypeSelector.tsx` |
| 7 | `AlbumOnboarding` ì»´í¬ë„ŒíŠ¸ | `app/dashboard/ai-photos/components/AlbumOnboarding.tsx` |
| 8 | `AlbumDashboard` ì»´í¬ë„ŒíŠ¸ | `app/dashboard/ai-photos/components/AlbumDashboard.tsx` |
| 9 | `AlbumCuration` dnd-kit ì»´í¬ë„ŒíŠ¸ | `app/dashboard/ai-photos/components/AlbumCuration.tsx` |
| 10 | `page.tsx` ë¦¬ë¼ì´íŠ¸ (ì•¨ë²” ì¤‘ì‹¬) | `app/dashboard/ai-photos/page.tsx` |
| 11 | ê¸°ì¡´ íƒ­ ì»´í¬ë„ŒíŠ¸ ì œê±° | `AIStudioTabs.tsx`, `HistoryTab.tsx`, `FavoritesTab.tsx`, `HistoryFilters.tsx` |

---

## 10. ë³µì¡ë„ ì˜ˆì‚°

| í•­ëª© | ìˆ˜ëŸ‰ |
|------|------|
| ìƒˆ DB í…Œì´ë¸” | 1ê°œ (`aiAlbums`) |
| ê¸°ì¡´ DB ìˆ˜ì • | 1ê°œ (`aiGenerations` + albumId) |
| ìƒˆ API ë¼ìš°íŠ¸ | 4ê°œ |
| ê¸°ì¡´ API ìˆ˜ì • | 1ê°œ |
| ìƒˆ ì»´í¬ë„ŒíŠ¸ | 4ê°œ |
| ê¸°ì¡´ íŒŒì¼ ìˆ˜ì • | 3ê°œ (`page.tsx`, `StyleSelector`, `generate/stream`) |
| ì œê±° íŒŒì¼ | 4ê°œ |
| ìƒˆ ì˜ì¡´ì„± | 0ê°œ |

---

## 11. ìŠ¤ì½”í”„ ê²½ê³„ (Out of Scope)

| ê¸°ëŠ¥ | ì‹œê¸° | ì‚¬ìœ  |
|------|------|------|
| ë‹¤ì¤‘ ì•¨ë²” (ìœ ì €ë‹¹ 2ê°œ+) | Phase 3 | MVPëŠ” 1ê°œë©´ ì¶©ë¶„ |
| ê°œë³„ ì‚¬ì§„ ì¬ìƒì„± ("ì´ ì»·ë§Œ ë‹¤ì‹œ") | Phase 2 | UX íŒ€ ê°•ë ¥ ì¶”ì²œ, ë³„ë„ ì„¤ê³„ í•„ìš” |
| ë°°ì¹˜ ìƒì„± (ì—¬ëŸ¬ ìŠ¤íƒ€ì¼ ë™ì‹œ) | ë¯¸ì • | í˜„ ì¸í”„ë¼ ë¹„í˜„ì‹¤ì  |
| ì•¨ë²” ê³µìœ  (ì¹´ì¹´ì˜¤í†¡ ë“±) | Phase 3 | |
| ì•¨ë²” ë ˆì´ì•„ì›ƒ/í…œí”Œë¦¿ | Phase 3 | |
| ì—ë””í„° ì•¨ë²” í”„ë¦¬ë·° | Phase 2 | ê¸°ì¡´ ì„¤ê³„ ë¬¸ì„œ ì°¸ì¡° |

---

## 12. ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `npx drizzle-kit generate` â€” ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±
- [ ] `npx tsc --noEmit` â€” íƒ€ì… ì—ëŸ¬ ì—†ìŒ
- [ ] ì˜¨ë³´ë”©: ì–¼êµ´ ì—…ë¡œë“œ â†’ ìŠ¤ëƒ… íƒ€ì… ì„ íƒ â†’ "ì•¨ë²” ë§Œë“¤ê¸°" â†’ ì•¨ë²” ìƒì„±
- [ ] ì²« ìƒì„±: ìŠ¤íƒ€ì¼ ì„ íƒ â†’ SSE ìŠ¤íŠ¸ë¦¬ë° â†’ 4ì¥ ìƒì„± â†’ ì•¨ë²”ì— ìë™ ê·€ì†
- [ ] ì¶”ê°€ ìƒì„±: "ì¶”ê°€ ì´¬ì˜" â†’ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ ì„ íƒ â†’ ìƒì„± â†’ ì•¨ë²”ì— ê·€ì†
- [ ] íë ˆì´ì…˜: ì´ë¯¸ì§€ ì„ íƒ/í•´ì œ â†’ ìˆœì„œ ë³€ê²½ (dnd) â†’ PUT API â†’ ìƒˆë¡œê³ ì¹¨ ìœ ì§€
- [ ] ì ìš©: "ì²­ì²©ì¥ì— ì ìš©" â†’ ì²­ì²©ì¥ ì„ íƒ â†’ galleryImages ì¶”ê°€
- [ ] ê¸°ì¡´ ë°ì´í„°: albumId=nullì¸ ê¸°ì¡´ ìƒì„± ê¸°ë¡ì´ ê¹¨ì§€ì§€ ì•ŠìŒ
- [ ] ì œê±° íŒŒì¼ ì°¸ì¡°: ì‚­ì œëœ ì»´í¬ë„ŒíŠ¸ importê°€ ë‚¨ì•„ìˆì§€ ì•ŠìŒ
