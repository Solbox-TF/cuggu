# 에디터 레이아웃 개선: 방향성 + 로드맵

> **날짜**: 2026-02-11
> **참여**: UX Critic, UI Implementer, PM, Backend Architect (AI 에이전트 팀 토론)
> **결론**: 2단계 접근 — 경량 흐름 개선(Step A) → 2모드 에디터(Step B) + AI Studio 분리

---

## Context

현재 Cuggu 에디터는 Figma 스타일 3패널(SectionPanel 220px + EditorPanel flex-1 + PreviewPanel 420px).
데어무드 대비 복잡하고, 유저 피드백: "편집 항목이 많아 보임" + "자연스러운 흐름이 필요" + "필수 먼저, 부차적인 건 따로".

**핵심 문제**: 발행에 필수인 건 4개(신랑이름, 신부이름, 예식날짜, 예식장)인데 UI는 40~50개 필드를 동등한 무게로 보여줌
**목표**: 프로그레시브 디스클로저 — "필수만 먼저, 나머지는 완성 후에" + **AI 사진 생성을 별도 프리미엄 경험으로 분리**

---

## 팀 토론 종합

4명(UX Critic, UI Implementer, PM, Backend Architect)이 코드를 읽고 분석.

### 합의된 사항
- **현재 에디터는 기능적으로 완성도 높음** — 문제는 "보여주는 방식"
- **탭 컴포넌트 8개는 그대로 재사용** — wrapper만 교체
- **백엔드/DB/API 변경 제로** — 99% 프론트엔드 작업
- **데어무드 그대로 따라가지 않음** — "모든 섹션을 접어서 보여주기"는 양적 압도감 동일
- **차별화: "양 자체를 줄임"** — 필수만 먼저 → 완성 후 꾸미기

### 팀 내 의견 차이 (중요)

| | UX Critic + UI Implementer | PM |
|---|---|---|
| **범위** | 2모드 에디터(Setup Wizard → Customize) 전면 전환 | 현재 레이아웃 유지, 흐름 가이드만 추가 |
| **기간** | ~2일 (핵심) | ~2-3일 (경량) |
| **논리** | 구조를 바꿔야 체감 변화가 크다 | 흐름만 바꿔도 충분, UI 건드리면 스코프 폭발 |

→ **결론**: PM 판단 수용. **1인 개발 현실**에서 UI 전면 전환은 리스크. 하지만 UX/UI 팀의 장기 비전은 맞으니 **2단계로 나눠서** 접근.

---

## 팩트 체크 (PM이 발견)

기존 "미구현"이라 적었던 것 중 **이미 구현된 것**:
- ✅ 공개 청첩장 뷰 (`inv/[id]/`) — OG 메타태그, 비번 보호, 조회수 추적까지 있음
- ✅ 카카오톡 공유 — ShareModal에 카카오 SDK 연동 완료

**진짜 미구현**:
- ❌ Toss 결제 (결제 플로우 없음)
- ❌ RSVP 게스트 폼 (에디터 설정 탭만 있고, 게스트 작성 폼 없음)

---

## 현재 에디터 핵심 문제점

### 1. 인지 과부하 (가장 큰 문제)
- 발행 필수: **4개** (validation.ts 확인) → UI 노출: **40~50개 필드**
- BasicInfoTab: 14필드 (이름 2개만 필수인데 부모/관계/고인까지 동등 노출)
- AccountTab: 12+필드 (선택인데 복잡도 최고)

### 2. 프로그레시브 디스클로저 부재
- 필수/선택 구분이 SectionPanel 11px 라벨로만 존재
- 탭 내부에서도 필수 필드와 선택 필드가 같은 시각적 위계
- "최소 입력 → 미리보기 → 보강" 루프가 안내되지 않음
- "나중에 채우기" 패턴 없음 → 불안감

### 3. 모바일 이탈 위험
- TopBar(44px) + TabBar(44px) = 88px 상단 점유
- 8개 탭 가로 스크롤 → 뒷쪽 탭 인식 불가
- 미리보기가 FAB → 전체화면 전환 → 편집 맥락 완전 상실
- 결과: "귀찮다 나중에" → 일회성 제품이라 이탈하면 안 돌아옴

### 4. 기타
- 3패널 = 프로 툴 느낌 (타겟: 비기술 20~30대 커플)
- SectionPanel + StepNavigation 이중 네비게이션
- 토글 스위치 의미 불명확 (설명 텍스트 없음)
- "Preview" 영어 라벨 (한국어 UI 일관성 깨짐)
- 데스크톱/모바일 완전 분리 → 유지보수 2배 (데이터 로딩 + previewData 변환 50줄 복붙)

### 유지해야 할 강점
- 실시간 미리보기 (폰 프레임) → 핵심 가치
- 섹션 토글 on/off → 좋은 기능
- Auto-save (2초 debounce + retry) → 안정적
- 탭 컴포넌트 8개의 폼 로직 → 잘 만들어져 있음

---

## 추천 방향: 2단계 접근

### Step A: 경량 흐름 개선 (즉시, 2-3일)

**원칙**: 현재 레이아웃 유지, "흐름 가이드"만 추가

1. **프로그레스 인디케이터** — TopBar 또는 편집 영역 상단
   ```
   ✅ 신랑 이름  ✅ 신부 이름  ⬜ 예식 날짜  ⬜ 예식장 이름
   → 2개만 더 채우면 발행할 수 있어요!
   ```
   - 기존 `validationResult.missing` 데이터 활용, 표시만 하면 됨

2. **탭 그룹 구분 강화** — SectionPanel에서 "필수 흐름" / "추가 설정" 시각적 분리
   - 기존 `lib/editor/tabs.ts`의 `group: 'required' | 'optional'` 활용
   - required 그룹에 프로그레스 표시, optional 그룹은 "더 꾸미기" 라벨

3. **"다음 단계" CTA** — 각 탭 하단 StepNavigation을 맥락적 CTA로 변경
   - 기본정보 완료 후: "예식 날짜를 입력해볼까요?"
   - 필수 완료 후: "인사말을 추가하면 더 따뜻한 청첩장이 됩니다"
   - 기존 `StepNavigation.tsx` 리팩터

4. **BasicInfoTab 고급 필드 접기** — 이름/연락처만 기본 노출, 부모정보는 아코디언
   - 체감 복잡도 50% 감소

5. **Quick Wins**
   - 인사말 기본값 프리필 (예시 3개 중 첫 번째)
   - "Preview" → "미리보기" 라벨 통일
   - 토글 옆 "청첩장에 포함" 힌트 추가

**변경 파일:**
- `components/editor/SectionPanel.tsx` — 그룹 라벨 강화
- `components/editor/StepNavigation.tsx` — 맥락 CTA로 변경
- `components/editor/TopBar.tsx` — 프로그레스 인디케이터 추가
- `components/editor/tabs/BasicInfoTab.tsx` — 고급 필드 아코디언
- `components/editor/tabs/GreetingTab.tsx` — 기본값 프리필
- `components/editor/PreviewPanel.tsx` — "Preview" → "미리보기"
- `stores/invitation-editor.ts` — `getEditorFlow()` 순수 함수 추가 (~20줄)

### Step B: 2모드 에디터 (장기, Step A 효과 검증 후)

**원칙**: Setup Wizard → Customize 이중 구조

**Setup 모드** (신규 유저):
```
┌──────────────────── TopBar ────────────────────┐
├─────────────────────────┬──────────────────────┤
│  ● ─ ○ ─ ○              │     Preview          │
│  1/3  기본 정보          │     ┌──────────┐    │
│                         │     │ 폰 프레임  │    │
│  신랑 이름: ___         │     │ 실시간     │    │
│  신부 이름: ___         │     │ 미리보기   │    │
│                         │     └──────────┘    │
│  [이전]       [다음 →]  │                      │
└─────────────────────────┴──────────────────────┘
```

**Customize 모드** (필수 완료 후):
```
┌──────────────────── TopBar ────────────────────┐
├─────────────────────────┬──────────────────────┤
│  ✅ 필수 완료!           │     Preview          │
│                         │     ┌──────────┐    │
│  ┌─ 기본 정보 ✅ ────┐  │     │           │    │
│  │ 홍길동 ♥ 김영희   │  │     │           │    │
│  │         [수정] ↗ │  │     │           │    │
│  └──────────────────┘  │     └──────────┘    │
│                         │                      │
│  ── 추가 꾸미기 ──      │                      │
│  ┌─ 인사말 ── 🔘 ──┐   │                      │
│  │ "두 사람이..."   │   │                      │
│  │         [편집] ↗│   │                      │
│  └──────────────────┘  │                      │
│  ┌─ 갤러리 AI 🔘 ──┐   │                      │
│  └──────────────────┘  │                      │
└─────────────────────────┴──────────────────────┘
```

**핵심 컴포넌트:**
- `EditorShell` — 반응형 분기 + 모드(setup/customize) 관리
- `SetupWizard` — 필수 3스텝, 기존 탭 컴포넌트를 children으로
- `CustomizePanel` — 섹션 요약 카드 리스트
- `SectionSummaryCard` — 상태뱃지 + 요약텍스트 + 편집/토글
- `SectionEditView` — 카드 클릭 시 기존 탭 컴포넌트 래핑

**재사용:** 탭 컴포넌트 8개 전부 변경 없음. wrapper만 교체.
**삭제:** SectionPanel, EditorPanel, StepNavigation → 새 컴포넌트로 대체
**유지:** PreviewPanel (접기 토글만 추가)

---

## 백엔드/데이터 영향 (Backend Architect 분석)

| 영역 | 영향 | 비고 |
|------|------|------|
| DB 스키마 | **없음** | extendedData JSONB, enabledSections 그대로 |
| API | **없음** | PUT/GET 전체 객체 전송 방식 유지 |
| Auto-save | **없음** | 2초 debounce + 전체 PUT. 탭이든 섹션이든 동일 |
| Validation 로직 | **없음** | validateInvitation() 순수 함수 그대로 |
| Store | **최소** | `getEditorFlow()` 순수 함수 1개 추가 (기존 validationResult에서 파생) |
| 성능 | **주의** | Collapsed = Unmounted 패턴 필수 (TemplateTab, GalleryTab, VenueTab 무거움) |

```typescript
// 새로 추가할 파생 상태 (순수 함수 ~20줄)
interface EditorFlowState {
  phase: 'required' | 'optional';       // 필수 3개 완료 여부로 자동 결정
  nextIncompleteSection: string | null;  // 다음 할 일 안내
  requiredProgress: number;              // 0~1
  optionalProgress: number;              // 0~1
}
// 기존 tabs.ts의 group 필드가 정확히 Phase에 대응됨 → 새 상수 불필요
```

---

## AI 사진 생성: 별도 프리미엄 경험

### 현재 상태 (문제)
- **위치**: GalleryTab > AIPhotoSection > AIPhotoGenerator — 3단계 중첩, 접힌 채로 시작
- **느낌**: 갤러리의 부속 기능 → 핵심 차별점이 겸손하게 묻혀있음
- **기능은 풍부**: 6개 AI 프로바이더, 10가지 스타일, 실시간 스트리밍, 크레딧 시스템
- **UX가 작음**: 2x2 그리드, 에디터 중앙 패널 안에서 작게 동작

### 방향: AI Studio (별도 경험)

AI 사진 생성을 갤러리 탭에서 분리해서, 전용 "AI Studio" 경험으로 승격.

**에디터 흐름에서의 위치:**
```
[Setup Wizard - 필수 3스텝 완료]
       ↓
[기본 청첩장 완성!]
       ↓
[🎨 "AI로 특별한 웨딩 사진을 만들어볼까요?"]  ← 프리미엄 CTA (핵심 전환 포인트)
       ↓                           ↓
[AI Studio 진입]             [건너뛰기 → Customize]
```

**AI Studio 레이아웃 (별도 페이지 또는 풀스크린 모달):**
```
┌──────────────────────────────────────────────────┐
│  AI 웨딩 포토 스튜디오                    [← 돌아가기] │
├────────────────────────┬─────────────────────────┤
│                        │                         │
│  📷 사진 업로드         │   생성된 사진 갤러리      │
│  [드래그 앤 드롭]       │   ┌────┬────┐           │
│                        │   │    │    │           │
│  🎨 스타일 선택         │   │ AI │ AI │           │
│  [10가지 스타일 카드]    │   │    │    │           │
│  ┌──┐ ┌──┐ ┌──┐       │   ├────┼────┤           │
│  │정│ │야│ │해│ ...    │   │    │    │           │
│  │장│ │외│ │변│        │   │ AI │ AI │           │
│  └──┘ └──┘ └──┘       │   │    │    │           │
│                        │   └────┴────┘           │
│  ⚡ 크레딧: 5 남음      │                         │
│  [✨ 생성하기]          │   [청첩장에 추가하기]     │
│                        │                         │
└────────────────────────┴─────────────────────────┘
```

**핵심 차별점:**
- **넓은 레이아웃**: 에디터 탭 안이 아닌 전용 공간 → 스타일 카드가 크고 시각적
- **몰입감**: 편집 흐름과 분리 → "특별한 경험"을 하고 있다는 느낌
- **결제 연동**: 무료 1회 + 추가 생성은 프리미엄 → 자연스러운 업셀 포인트
- **프리뷰 강화**: 2x2 작은 그리드 → 큰 이미지 프리뷰 + 비교 뷰

**기존 코드 재사용:**
- `AIPhotoUploader`, `StyleSelector` → 그대로 (이미 `/app/dashboard/ai-photos/components/`에 존재)
- `AIStreamingGallery`, `AIResultGallery` → 레이아웃만 확대
- `/api/ai/generate/stream` → API 변경 없음
- `lib/ai/credits.ts` → 크레딧 시스템 그대로
- `lib/ai/models.ts`, `lib/ai/prompts.ts` → 변경 없음

**GalleryTab에서의 변경:**
- AI 생성 섹션 제거 → "AI 스튜디오에서 사진 만들기" 링크로 대체
- 일반 사진 업로드는 GalleryTab에 그대로 유지
- AI로 생성된 사진은 갤러리에 자동 추가 (기존 로직 동일)

### AI Studio 로드맵 위치

| Phase | 내용 |
|-------|------|
| **Step A** (경량 개선) | GalleryTab에 "AI Studio로 이동" CTA 추가 정도 |
| **Step B** (2모드 에디터) | Setup 완료 → AI Studio CTA → Customize 흐름 완성 |
| **Phase 2** | AI Studio 전용 페이지 본격 구현 (넓은 레이아웃, 결제 연동) |

---

## 로드맵

### Phase 0: 현재 (완료)
- [x] 팀 토론으로 방향성 확정
- [x] 현재 에디터 문제점 분석

### Phase 1A: 수익화 (최우선)
- Toss 결제 연동 (프리미엄 + AI 크레딧)
- RSVP 게스트 폼

### Phase 1B: 편집 흐름 경량 개선 (1A와 병행, 2-3일) ← Step A
- 프로그레스 인디케이터
- 탭 그룹 구분 강화
- 맥락적 "다음 단계" CTA
- BasicInfoTab 고급 필드 접기
- Quick wins (인사말 기본값, 라벨 통일, 토글 힌트)

### Phase 2: 2모드 에디터 전환 (Phase 1 효과 검증 후) ← Step B
- Setup Wizard + Customize 이중 구조
- 2패널 레이아웃 (SectionPanel 제거)
- AI Studio 별도 경험 구현
- 미리보기 접기 토글

### Phase 3: 모바일 통합
- 데스크톱/모바일 단일 라우트 + 반응형 쉘
- previewData 중복 제거 (usePreviewData 훅 추출)

### Phase 4: 고급 UX
- 온보딩 가이드
- 스마트 디폴트 확대
- AI 어시스턴트 (인사말 자동 생성 등)

---

## 경쟁 전략

| | 데어무드 | Cuggu (우리 방향) |
|---|---|---|
| 접근법 | 모든 섹션을 접어서 보여줌 | 필수만 먼저, 나머지는 완성 후 |
| 첫 인상 | 간결하지만 "할 게 많아 보임" | "3단계만 하면 끝" |
| 차별점 | UI 세련됨 | **AI Studio — 별도 프리미엄 경험** |
| 전략 | UI를 따라가면 영원히 2등 | AI 기능을 핵심 전환 포인트로 활용 |
| 수익화 | 템플릿/기능 과금 | **AI 크레딧 과금** (무료 1회 → 추가는 프리미엄) |

---

## 검증 방법

1. Step A 구현 후 에디터 완료율(시작→발행) 지표 트래킹
2. AI Studio CTA 클릭률 → AI가 전환 포인트로 작동하는지 검증
3. 주변 결혼 준비 중인 커플에게 사용성 테스트
4. Step A vs Step B 필요성 판단 → 데이터 기반 결정
